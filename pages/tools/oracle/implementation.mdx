---
title: "Реализация"
description: "Получите (выведите) аккаунт ценового фида Pyth Lazer и декодируйте его байты"
---

## Получение аккаунта ценового фида

Мы выводим PDA аккаунта цены, используя следующие сиды (seeds)

- **"price feed"** (buffer)
- **"pyth-lazer"** (buffer)
- **feedID** (buffer) — выбранный актив. Список поддерживаемых фидов можно найти [здесь](https://github.com/magicblock-labs/real-time-pricing-oracle/blob/main/pyth_lazer_list.json)
- **price program id** — `PriCems5tHihc6UDXDjzjeawomAwBduWMGAi8ZUjppd`

```ts
// seeds: ["price_feed", "pyth-lazer", feed_id_as_string]
function deriveFeedAddress (feedId: string) {
  const [addr] = web3.PublicKey.findProgramAddressSync(
  [Buffer.from('price_feed'), Buffer.from('pyth-lazer'), Buffer.from(feedId)],
  PROGRAM ID
  );
  return addr
}
```

## Разбор данных аккаунта

Ончейн-аккаунт хранит заголовок и поля с ценовыми данными. Мы читаем сырые байты и выполняем декодирование.

**Смещение цены:** 73 байта от начала

**Тип:** Знаковое 64-битное целое число (i64)

**Применение экспоненты:** Масштабируйте сырую цену, используя экспоненту аккаунта

```ts
const addr = deriveFeedAddress(feed.id);
const PRICE_OFFSET = 73;

const dv = new DataView(ai.data.buffer, ai.data.byteOffset, ai.data.byteLength);
const raw = dv.getBigUint64(PRICE_OFFSET, true);
const price = Number(raw) * Math.pow(10, feed.exponent);
```

<CardGroup cols={3}>
  <Card title="Демо" icon="waveform" iconType="duotone" href="https://pyth-template.magicblock.app/">
    Поток цен в реальном времени
  </Card>
  <Card title="Реализация" icon="book" iconType="duotone" href="/pages/tools/oracle/implementation">
    Узнайте, как получить доступ к нашим оракулам в ончейне
  </Card>
  <Card title="Пример Кода" icon="code" iconType="duotone" href="https://github.com/magicblock-labs/real-time-pricing-oracle
">
    Ознакомьтесь с нашим репозиторием на GitHub
  </Card>
</CardGroup>