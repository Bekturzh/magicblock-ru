---
description: "Запускайте и тестируйте свои Native Rust или Anchor программы с полной кастомизацией на локальном хосте и Эфемерных Роллапах, минимизируя сетевую задержку и риск ограничения скорости."
title: "Локальная разработка"
---

import Validators from "/snippets/validators.mdx";

---

### Быстрый Доступ

Изучайте программы и тестовые скрипты для Anchor и Native Rust:

<CardGroup cols={2}>
  <Card title="GitHub" icon="anchor" iconType="duotone" href="/pages/ephemeral-rollups-ers/how-to-guide/quickstart">
    Реализация на Anchor
  </Card>
  <Card title="GitHub" icon="rust" iconType="duotone" href="/pages/ephemeral-rollups-ers/how-to-guide/rust-program">
    Реализация на Native Rust
  </Card>
</CardGroup>

---

### Локальная Среда

> ⚠️  При использовании локального валидатора ЭР необходимо подключить его к предпочитаемому базовому слою (например,`mainnet-beta`, `devnet`, or `localhost`) к которому делегированы аккаунты.
>
> <Info>
>   Эти общедоступные средства проверки поддерживаются для разработки. Не забудьте добавить конкретный ER валидатор в свою инструкцию при делегировании:
>
>   - Азия ([devnet-as.magicblock.app](http://devnet-as.magicblock.app)): `MAS1Dt9qreoRMQ14YQuhg8UTZMMzDdKhmkZMECCzk57`
>   - Европа ([devnet-eu.magicblock.app](http://devnet-eu.magicblock.app)): `MEUGGrYPxKk17hCr7wpT6s8dtNokZj5U2L57vjYMS8e`
>   - США ([devnet-us.magicblock.app](http://devnet-us.magicblock.app)): `MUS3hc9TCw4cGC12vHNoYcCGzJG1txjgQLZWVoeNHNd`
>   - TEE ([tee.magicblock.app](http://tee.magicblock.app)): `FnE6VJT5QNZdedZPnCoLsARgBwoE6DeJNjBs2H1gySXA`
>   - Локальная служба поддержки ([localhost](http://localhost)): `mAGicPQYBMvcYveUZA5F5UNNwyHvfYh5xkLS2Fr1mev`
> </Info>

<Tabs>
  <Tab title="solana-test-validator (localhost)">
    <Steps>
      <Step title="Настройте Solana Test Validator (локальный хост) и разверните вашу обновлённую программу.">
        1. Устновите `solana-test-validator`:

        ```bash
        sh -c "$(curl -sSfL https://release.anza.xyz/stable/install)"
        ```

        2. Установите последнюю версию Эфемерного валидатора MagicBlock

        ```bash
        npm install -g @magicblock-labs/ephemeral-validator@latest
        ```

        2. Запустите `solana-test-validator` с клонированной программой делегирования и аккаунтами Devnet:

        ```bash
        mb-test-validator --reset
        ```

        3. Обновите и разверните вашу программу на [localhost](http://localhost):

        <Tabs>
          <Tab title="Rust Native">
            ```bash
            cargo build-sbf
            solana config set --url localhost
            solana program deploy YOUR_PROGRAM_PATH
            ```
          </Tab>
          <Tab title="Anchor">
            ```bash
            anchor build && anchor deploy \
            --provider.cluster localnet
            ```
          </Tab>
        </Tabs>
      </Step>
      <Step title="Запустите валидатор ЭР MagicBlock  (Localhost)">
        Запустите локальный эфемерный валидатор с указанием [localhost](http://localhost):

        ```bash
        RUST_LOG=info ephemeral-validator \
          --remotes "http://localhost:8899" \
          --remotes "ws://localhost:8900"  \
          -l "127.0.0.1:7799"
        ```
      </Step>
      <Step title="Тестируйте инструкции программы и делегирование (Localhost)">
        Запустите ваши тесты на локальном эфемерном валидаторе:

        <Tabs>
          <Tab title="Rust Native">
            ```bash
            EPHEMERAL_PROVIDER_ENDPOINT=http://localhost:7799 \
            EPHEMERAL_WS_ENDPOINT=ws://localhost:7800 \
            PROVIDER_ENDPOINT=http://localhost:8899 \
            WS_ENDPOINT=ws://localhost:8900 \
            yarn test
            ```
          </Tab>
          <Tab title="Anchor">
            ```bash
            EPHEMERAL_PROVIDER_ENDPOINT="http://localhost:7799" \
            EPHEMERAL_WS_ENDPOINT="ws://localhost:7800" \
            anchor test \
            --provider.cluster localnet \
            --skip-local-validator \
            --skip-build \
            --skip-deploy
            ```
          </Tab>
        </Tabs>
      </Step>
    </Steps>
  </Tab>
  <Tab title="devnet">
    <Steps>
      <Step title="Обновите и разверните программу в Devnet.">
        Обновите вашу программу с делегированием MagicBlock и разверните её в Devnet:

        <Tabs>
          <Tab title="Rust Native">
            ```bash
            cargo build-sbf
            solana config set --url devnet
            solana program deploy YOUR_PROGRAM_PATH
            ```
          </Tab>
          <Tab title="Anchor">
            ```bash
            anchor build && anchor deploy \
            --provider.cluster devnet
            ```
          </Tab>
        </Tabs>
      </Step>
      <Step title="Установите и запустите валидатор ЭР MagicBlock  (Devnet)">
        1. Установите последнюю версию Эфемерного валидатора MagicBlock:

        ```bash
        npm install -g @magicblock-labs/ephemeral-validator@latest
        ```

        2. Запустите локальный эфемерный валидатор с подключением к Devnet:

        ```bash
        RUST_LOG=info ephemeral-validator \
          --accounts-lifecycle ephemeral \
          --remote-url "https://rpc.magicblock.app/devnet" \
          --rpc-port 7799
        ```
      </Step>
      <Step title="Тестируйте инструкции программы и делегирование (Devnet)">
        Запустите ваши тесты на локальном эфемерном валидаторе:

        <Tabs>
          <Tab title="Rust Native">
            ```bash
            EPHEMERAL_PROVIDER_ENDPOINT=http://localhost:7799 \
            EPHEMERAL_WS_ENDPOINT=ws://localhost:7800 \
            yarn test
            ```
          </Tab>
          <Tab title="Anchor">
            ```bash
            EPHEMERAL_PROVIDER_ENDPOINT="http://localhost:7799" \
            EPHEMERAL_WS_ENDPOINT="ws://localhost:7800" \
            anchor test \
            --provider.cluster devnet \
            --skip-local-validator \
            --skip-build \
            --skip-deploy
            ```
          </Tab>
        </Tabs>
      </Step>
    </Steps>
  </Tab>
</Tabs>

---